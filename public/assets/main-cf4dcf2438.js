function setGridWidth(){var t=$(".section").innerWidth();document.documentElement.style.setProperty("--grid-width",t+"px")}window.Ekko=function(m,v,a,o,e){"use strict";return o.init=function(){m._body=m("body"),m._main=m(".main"),m._mainSection=m(".section__main"),m._block=m(".block"),m._artist=m(".artist"),m._event=m(".event"),m._header=m(".header"),m._navBar=m(".nav-bar"),m._navMain=m(".nav--main"),o.misc.init(),o.env.init(),o.side.init(),o.artist.init(),o.nav.init(),o.modal.init(),m(".artist__content, .event__content, .news-content, .news-page").fitVids(),m("[js-video-embed]").fitVids();var t,e;new Swiper(".news-content",{slidesPerView:"auto",centeredSlides:!1,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{640:{autoHeight:!0}}});m._body.hasClass("arena")&&Vimeo&&((t=a.querySelector("iframe"))&&((e=new Vimeo.Player(t)).on("play",function(){m._body.addClass("isPlaying"),console.log("played the video!")}),e.on("pause",function(){m._body.removeClass("isPlaying")}),e.on("ended",function(){m._body.removeClass("isPlaying")})),m(v).on("resize",_.throttle(setGridWidth)),setGridWidth());var n=m("#artister").offset().top,i=m("#artister").offset().top+m("#artister").outerHeight()-m(v).innerHeight()+100,s=m(".u-section-visible");m(a).scroll(function(){s.toggleClass("yay",m(a).scrollTop()>=n&&m(a).scrollTop()<=i)}),m(v).on("resize",_.throttle(function(){n=m("#artister").offset().top,i=m("#artister").offset().top+m("#artister").outerHeight()-m(v).innerHeight()+100}))},m(a).ready(o.init),o.modal={init:function(){var t=this;m("#ticket-modal").hasClass("remodal-is-initialized")||(this.instance=m("[data-remodal-id=signup]").remodal(),m(a).on("closed",".remodal",function(t){Cookies.get("ekko-newsletter")===e&&Cookies.set("ekko-newsletter","shown",{expires:5,path:""}),m(".modal-form").removeClass("status-ok"),console.log("Modal is closed")}),this.initForm(),setTimeout(function(){t.showModal()},1e3))},initForm:function(){var e=this;m(".modal-form .modal-button").on("click",function(t){t.preventDefault(),m(".form-status").html(""),m.post("/",m(this).parent().serialize()).done(function(t){t.success?(Cookies.set("ekko-newsletter","shown",{expires:365,path:""}),m(".modal-form").addClass("status-ok"),m(".form-status").html("Thank you!"),setTimeout(function(){e.instance.close()},1e3),console.log("successful registration")):(m(".form-status").html(t.message),console.log("Error: "+t.message))})})},showModal:function(){Cookies.get("ekko-newsletter")===e&&this.instance.open()}},o.side={heightAdjustment:80,init:function(){var t=this;m._body.hasClass("single")&&t.initArticlePosition(),this.setSticky(),m(v).on("resize",_.throttle(function(){t.setSticky()}))},setSticky:function(){!o.env.mobile&&1045<=m(v).outerWidth()?m(".u-stick").Stickyfill():Stickyfill.stickies.length&&Stickyfill.kill()},setPosition:function(){var t=m(".single .section__side-header").innerHeight()+60;m(".single .section__side-content").css("top",t)},initArticlePosition:function(){var t=m(".section__main > .block"),e=m(v).innerHeight()/2+this.heightAdjustment,n=t.offset().top-m(v).innerHeight()/2+this.heightAdjustment;t.css({"margin-top":-1*n,"min-height":e})}},o.nav={scrollSpeed:900,scrollEase:"easeOutExpo",scrollTopLimit:10,scrollOffset:10,navActiveClass:"active-nav",sectionActiveClass:"active-section",waypoint:m(".waypoint"),init:function(){this.initLocalScroll(),this.loadLocalScroll(),this.initWaypoints(),this.initNavBar(),m(".burger").on("click",function(){m._body.toggleClass("menu-open")}),o.env.mobile?m(".nav--main a").on("click",function(t){m._body.hasClass("menu-open")&&m._body.removeClass("menu-open")}):m(".nav--main .parent").hover(function(){m(this).children(".nav__sub").toggleClass("visible")})},loadLocalScroll:function(){var n=this,i=a.location.hash.split("/")[0];i&&(setTimeout(function(){v.scrollTo(0,0)},1),setTimeout(function(){var t,e=m(i);0<e.length&&(t=0,"#news"===i&&(t=m._header.innerHeight()+n.scrollOffset+e.parent().find(".news-header").innerHeight()),m._body.velocity("scroll",{duration:n.scrollSpeed,easing:n.scrollEase,offset:e.offset().top-t}))},300))},initLocalScroll:function(){var i=this;m("a[href*=#]:not([href=#])").on("click",function(t){var e,n=m._header.innerHeight()+i.scrollOffset;location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname&&(e=(e=m(this.hash)).length?e:m("[name="+this.hash.slice(1)+"]"),("artister"==this.hash.slice(1)||e.hasClass("artist")&&e.hasClass("block"))&&(n=60),"#news"===this.hash&&(n+=m("#news").parent().find(".news-header").innerHeight()),e.length&&(m("html, body").velocity("scroll",{duration:i.scrollSpeed,easing:i.scrollEase,offset:e.offset().top-n}),t.preventDefault()))})},initWaypoints:function(){var e=this;this.waypoint.waypoint(function(t){m('a[href*="#'+this.element.id+'"]').toggleClass(e.navActiveClass,"down"===t),m(this.element).toggleClass(e.sectionActiveClass,"down"===t)},{offset:"15%"}),this.waypoint.waypoint(function(t){m('a[href*="#'+this.element.id+'"]').toggleClass(e.navActiveClass,"up"===t),m(this.element).toggleClass(e.sectionActiveClass,"up"===t)},{offset:function(){return 100-m(this.element).height()}}),m(".nav-item--festival").bind("cssClassChanged",function(){m(".stamp").toggleClass("hidden",!m(this).hasClass("active-nav"))})},initNavBar:function(){m(v).on("scroll",_.throttle(function(){10<this.scrollY?m(".header").addClass("-stay"):m(".header").removeClass("-stay")}))}},o.misc={init:function(){this.setupClassChangedEvent()},setupClassChangedEvent:function(){var e=jQuery.fn.addClass;jQuery.fn.addClass=function(){var t=e.apply(this,arguments);return jQuery(this).trigger("cssClassChanged"),t};var n=jQuery.fn.removeClass;jQuery.fn.removeClass=function(){var t=n.apply(this,arguments);return jQuery(this).trigger("cssClassChanged"),t}}},o.artist={overClass:"-focus",init:function(){var t=this;o.env.touch||m._block.on("mouseenter",function(){m(this).addClass(t.overClass)}).on("mouseleave",function(){m(this).removeClass(t.overClass)})},addLinkRelation:function(t){var e=m(t).find("a:not(.link-button)"),n=m(t).find("a.more");e.on("mouseenter",function(){m(this).addClass("active"),n.addClass("active")}).on("mouseleave",function(){m(this).removeClass("active"),n.removeClass("active")})}},o.env={init:function(t){this.touch=this.getTouch(),this.transition=this.detectCSSFeature("transition"),this.transform=this.getTransform(),this.mobile=m.browser.mobile||m(v).outerWidth()<768},getTouch:function(){return"ontouchstart"in v||v.navigator&&v.navigator.msPointerEnabled&&v.MSGesture||v.DocumentTouch&&a instanceof DocumentTouch},detectCSSFeature:function(t){var e,n=!1,i="Webkit Moz ms O".split(" "),s=a.createElement("div"),o=0;if(t=t.toLowerCase(),void 0!==s.style[t]&&(n=!0),!1===n)for(e=t.charAt(0).toUpperCase()+t.substr(1);o<i.length;o++)if(void 0!==s.style[i[o]+e]){n=!0;break}return n},getTransform:function(){for(var t="transform WebkitTransform MozTransform OTransform msTransform".split(" "),e=0,e=0;e<t.length;e++)if(void 0!==a.createElement("div").style[t[e]])return t[e];return!1},support3d:function(){return navigator.userAgent.match(/msie 9/i)},title:function(t){a.title=t},bodyClasses:function(t){m._body.attr("class",t)}},v._={},_.now=Date.now||function(){return(new Date).getTime()},_.debounce=function(e,n,i){var s,o,a,r,l,c=function(){var t=_.now()-r;t<n&&0<=t?s=setTimeout(c,n-t):(s=null,i||(l=e.apply(a,o),s||(a=o=null)))};return function(){a=this,o=arguments,r=_.now();var t=i&&!s;return s=s||setTimeout(c,n),t&&(l=e.apply(a,o),a=o=null),l}},_.throttle=function(n,i,s){var o,a,r,l=null,c=0;s=s||{};function u(){c=!1===s.leading?0:_.now(),l=null,r=n.apply(o,a),l||(o=a=null)}return function(){var t=_.now();c||!1!==s.leading||(c=t);var e=i-(t-c);return o=this,a=arguments,e<=0||i<e?(l&&(clearTimeout(l),l=null),c=t,r=n.apply(o,a),l||(o=a=null)):l||!1===s.trailing||(l=setTimeout(u,e)),r}},_.viewportOffset=function(t){var e=m(v),n=m(t),i=e.scrollLeft(),s=e.scrollTop(),o=n.offset(),a=i,r=s,l=i+e.width(),c=s+e.height(),u=o.left,h=o.top,f=o.left+n.width(),d=o.top+n.height();return{left:o.left-i,top:o.top-s,topOffset:o.top,insideViewportFull:a<f&&u<l&&r<d&&h<c,insideViewport:a<f&&u<l&&r+50<d&&h<c}},o}(jQuery,window,document,window.Ekko||{});